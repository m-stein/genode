

              ===============================================
              Release notes for the Genode OS Framework 21.02
              ===============================================

                               Genode Labs



; intro

;@nfeske


Pluggable network device drivers
################################

The results of our approach to
[https://genode.org/documentation/release-notes/20.08#The_GUI_stack__restacked - pluggable framebuffer and input drivers]
encouraged us to take on the third major driver category, namely networking
drivers, which subsumes not only Ethernet drivers but also wireless networking
drivers and mobile baseband drivers. The latter two are of course particularly
interesting for mobile communication devices.

Similarly to the story given above for the framebuffer and input drivers,
Genode's network drivers used to play the roles of NIC servers, providing a
network-interface service to network applications. As a consequence, the
lifetime of a network application was always bound to the lifetime of the
underlying NIC driver. An unfortunate fact in, for instance, the event of a
crash in the usually large driver code base but also when it comes to
the intentional unplugging or exchange of drivers.

[image layered_nic_multi_app_risk]

However, in most scenarios, networking applications do not operate directly on
a network interface because this would prevent the use of the network interface
by more than one application at a time. Instead, there is usually a NIC
multiplexing component in-between the driver and one or multiple applications.
In most contemporary scenarios this is the NIC router that acts as NIC client
towards the driver and as NIC server towards the applications.

Thus, we contemplated the idea of letting the NIC driver operate as NIC client
of the NIC router instead as this would decouple the application from the
drivers lifetime while the driver's special role would be modeled solely by a
routing policy. However, even though the data channel of the NIC interface is
bi-directional, we realized that the reversal of the role of the driver does
not only entail the communication of network payload but also propagation of
the link state and the MAC address. This prompted us to introduce a new Genode
session type called "Uplink" that precisely models the NIC-driver-as-client
scenario.

[image nic_router_services]

In a nutshell, an Uplink session is almost the same as a NIC session with only
three minor differences. First, the MAC address is given by the client (the
driver) through an argument in the session request. Second, the roles of the TX
and RX packet streams are interchanged compared to a NIC session. I.e., the
_client_ transmits via TX and receives through RX while at the server side it's
vice-versa. And third - as a mere interface optimization - the link state of an
Uplink session is always "up". The session is requested by the client (the
driver) only in the event of a "link-up" edge. Analogously, whenever the link
goes "down", the client closes the session again.

With this new session interface in place, the NIC router becomes the only
long-running component in the scenario. It provides both a NIC and an Uplink
session interface. The NIC session interface is used by network applications.
The Uplink session interface is used by drivers. Inside the router, Uplinks
sessions are treated the same as NIC sessions. Therefore, we decided that the
well known <policy> tags in the configuration are now simply applied to both
session types. This means, that each <uplink> tag that connected a driver in a
router configuration can now be replaced through a <policy> tag with a label
attribute that matches the drivers session request.

[image nic_uplink_multi_app]

We divided the process for this architectural change into the following
autonomous steps:

# Introduce the Uplink session and Uplink-session support in the NIC router.
# Let NIC drivers support both modes, "NIC session server" and "Uplink session
  client" depending on a new _transitional_ <config>-tag attribute 'mode'.
  This attribute is optional and has two possible values, 'uplink_client'
  and 'nic_server', of which it defaults to the latter.
# Adapt all network scenarios in the basic Genode repositories to use NIC
  drivers only with '<config mode="uplink_client">'.
# Remove support for the "NIC session server" mode from all NIC drivers and
  with it also the transitional 'mode' attribute.

All steps except the last one are completed by now. The transitional 'mode'
attribute and the "NIC session server" mode will remain available in all NIC
drivers until the next Genode release in order to give others the opportunity
to gracefully adapt their NIC drivers and network scenarios to the change.


LTE modem stack
###############

;@ssumpf

commit 0beda6bca4040bfef47bf802e3fd2b453ce8d009
Author: Sebastian Sumpf <sebastian.sumpf@genode-labs.com>
Date:   Thu Jul 9 15:10:21 2020 +0200

    dde_linux: USB MBIM modem driver support
    
    Thise driver supports USB LTE modems for Huawais' ME906s through MBIM
    and provides a traditional Nic session. The "control" interface is a
    Terminal session, which can be used via libmbim/mbimcli.
    
    issue #3822


commit 91f24672e072a25fedb36864d25b88cc2b1a6f5c
Author: Martin Stein <martin.stein@genode-labs.com>
Date:   Thu Jul 9 21:36:38 2020 +0200

    glib: adaptions for libmbim
    
    1. glib: don't assume GNU libiconv
    
       This removes the glib config switch that made the build assume a GNU libiconv
       which led to the following compile error:
    
       ! .../lib/glib/glib/gconvert.c:55:2: error: #error GNU libiconv in use but
       !   included iconv.h not from libiconv
    
    2. glib: fix "no such instruction" in symbol file
    
       This changes several 'R' entries to 'T' entries in the glib symbols file that
       caused assemble errors as follows:
    
       ! glib.symbols.s:1621: Error: no such instruction: `glib_binary_age R'
       ! glib.symbols.s:1625: Error: no such instruction: `glib_interface_age R'
       ! glib.symbols.s:1626: Error: no such instruction: `glib_major_version R'
       ! glib.symbols.s:1628: Error: no such instruction: `glib_micro_version R'
       ! glib.symbols.s:1629: Error: no such instruction: `glib_minor_version R'
    
    3, glib: adapt run script
    
       - Remove obsolete pthread.lib.so boot module as it is now part of
        libc.lib.so.
    
       - Provide '/tmp' directory as a g_file_open_tmp test wants to create
         a file in there.
    
       - Use [depot_user] for selecting depot archives instead of hardcoding
         it to 'genodelabs'.
    
    4. glib: enable gobject and gio subsystem
    
       - Provide proper definitions for 32 and 64-bit machines
       - Add gobject and gio subsystems
       - Depends on libffi, which is currently only availabe for arm_v7a and
        x86_64.
    
       The 'glib' symbols file contains pretty much all symbols, even if the
       belong to supported or rather not supported backends, e.g. dbus.
    
    by mstein and cnuke
    
    Ref #168 and #223

commit d120a1c2b145354fb0175fb5087b3e7dd10557d2
Author: Martin Stein <martin.stein@genode-labs.com>
Date:   Fri Jul 10 01:12:26 2020 +0200

    Port of libmbim-1.24.2
    
    libmbim is a glib-based library for talking to WWAN modems and devices
    which speak the Mobile Broadband Interface Model (MBIM) protocol.
    
    On Genode we use a pre-configured VFS to access the device, please look
    at the 'run/mbimcli.run' run script.
    
    Fixes #217.


commit d8e522b4beff734fc434e4490c6f126fcc67f2fd
Author: Sebastian Sumpf <sebastian.sumpf@genode-labs.com>
Date:   Thu Oct 22 14:54:30 2020 +0200

    mbimcli: Basic modem connect support
    
    This program opens a terminal session to Genode's 'usb_modem' driver and
    issues a GSM connection sequence for a supported MBIM modem. Upon
    success it generated a NIC router configuration report. See
    "src/app/mbimcli/README".
    
    issue #217


commit a5957002d968a48297981abe5221dbb352c71fd6
Author: Sebastian Sumpf <sebastian.sumpf@genode-labs.com>
Date:   Fri Dec 4 09:45:02 2020 +0100

    mbim: run script using Genode's fetchurl tool
    
    This script configures the LTE modem and uses Genode's 'fetchurl' to
    download 'https://genode.org/about/LICENSE'
    
    fixes #217

commit 775ae936b701b26d0ee99be1b1b57c6c1ac9770b
Author: Sebastian Sumpf <sebastian.sumpf@genode-labs.com>
Date:   Thu Dec 3 10:20:22 2020 +0100

    mbimcli: Fix 'heap could not free memory block' warnings
    
    Don't use 'g_autofree' pointers for Genode strings.
    
    issue #217


commit b75ccf8102d2c24bfadd3fd57df059aa4ed57f7b
Author: Sebastian Sumpf <sebastian.sumpf@genode-labs.com>
Date:   Thu Jan 28 13:01:42 2021 +0100

    mbim: Use Uplink session in mbimcli
    
    also change run scripts accordingly.
    
    fixes #247


Base framework and OS-level infrastructure
##########################################

NIC router
==========

The NIC router received two very practical features, the consideration of
multiple DNS server entries on DHCP and an ARP-less mode for domains.

The latter was motivated by the fresh support for LTE modems (see section
[LTE modem stack]). An LTE modem normally doesn't respond to ARP, so, when
using it as uplink for the NIC router, the corresponding domain can't request
IP-to-MAC-address resolutions as usual. This is addressed through the new
optional attribute 'use_arp' in <domain> tags of the NIC router configuration.
By default it is set to 'yes' which yields the same behavior as in the past.

However, when set to 'no' for a domain, this domain will prevent sending ARP
requests in general. This leaves the question how to determine the destination
MAC address for a packet that shall be sent at this domain when only the
destination IP address is known. This is solved by the router by simply using
the source MAC address also as destination MAC address, an approach that we
could observe also in other IP stacks and that worked just fine in our tests.

The ARP-less domain mode is demonstrated through the run script
_repos/os/run/nic_router_disable_arp.run_.

The consideration of multiple DNS-server entries on DHCP comes in two parts.
First, when acting as DHCP client at a domain, the router will now parse all
option 6 entries in DHCP ACK replies from the server and memorize them as part
of the resulting IP config of the domain. These entries will then also be
reported if '<report config="yes"/>' is set in the routers config. A router
report with multiple DNS server entries will look like this:

! <state>
!   <domain name="uplink_1" ipv4="10.0.0.3/24" gw="10.0.0.1">
!     <dns ip="10.0.0.2"/>
!     <dns ip="1.1.1.1"/>
!     <dns ip="8.8.8.8"/>
!     ...
!   </domain>
!   <domain name="uplink_2" ipv4="168.192.0.200/24" gw="168.192.0.1">
!     <dns ip="168.192.0.10"/>
!     <dns ip="168.192.0.8"/>
!     ...
!   </domain>
!   ...
! </state>

On the other hand, when acting as DHCP server at a domain, one has two
options. Option 1 is to configure the DHCP server to fetch DNS server entries
automatically from another domain:

! <domain name="downlink" interface="10.0.1.1/24">
!   <dhcp-server dns_server_from="uplink_1" .../>
! </domain>

In this case, the router will now reflect not only one but all DNS server
entries from the source domain ("uplink") through the DHCP replies sent at the
destination domain ("downlink") without changing the entry order. This approach
is demonstrated through the new _repos/os/run/nic_router_dhcp_unmanaged.run_
run script.

Option 2 is to configure the DNS server entries manually at the DHCP
server:

! <domain name="downlink" interface="10.0.1.1/24">
!   <dhcp-server ...>
!     <dns-server ip="10.0.0.2"/>
!     <dns-server ip="1.1.1.1"/>
!     <dns-server ip="8.8.8.8"/>
!   </dhcp-server>
! </domain>

The order in which the <dns-server> tags occure also determines the order of
option 6 entries in the replies of the DHCP server. Besides its use for static
DNS server configurations, this option can also be used for more sophisticated
forwarding of DNS server entries through a separate management component. The
management component could listen to the reported IP config of the source
domains, apply custom policies like address filters to the result, and
re-configure the DHCP servers of the destination domains accordingly. This
approach is demonstrated in the new _repos/os/run/nic_router_dhcp_managed.run_
run script.

Please note that thhe former 'dns_server' attribute of the <dhcp-server> tag
is no longer considered by the router as the new <dns-server> tag replaces it.
Thus, you might want to adapt your NIC router scenarios accordingly.


VFS support for named pipes
===========================

;@nfeske

commit 7f7382e48a1a7df7c069cadf42569fbb70f42d60
Author: Sid Hussmann <sid.hussmann@gapfruit.com>
Date:   Fri Oct 16 19:29:21 2020 +0200

    vfs/pipe: add fifo feature to pipe plugin
    
    The vfs pipe plugin can now be used as named pipe which anables data
    transfer via file handles from one component to another. E.g. if one
    would like to send data from component A to stdin of a libc component B,
    one can do so by simply writing to that fifo file.
    
    Issue #3583

commit f24198b2788cf569ced396b2d8914e319c9ba4ea
Author: Sid Hussmann <sid.hussmann@gapfruit.com>
Date:   Wed Feb 3 17:37:32 2021 +0100

    vfs/pipe: refactor read/write synchronization
    
    All pipe-ends were notified at the same time which leads to dead-locks.
    This commit mitigates this by having a signal handler for each pipe and
    each pipe-end respectively.
    
    Issue #3583

; contribution by Sid:

The vfs/pipe plugin now has a named pipe feature. The main motivation was to
easily stream data from pure Genode components to libc components via
file-system sessions that can be attached to stdin, stdout, and stderr. This
feature further makes it possible to pipe several components together,
similarly to how it is done on Unix. Additionally, the thread synchronization
has been improved so that large data chunks can be transferred without
blocking.


Terminal
========

;@nfeske

commit d47f87a768eebb105b39fc45ea69fc9da6f4f1f0
Author: Norman Feske <norman.feske@genode-labs.com>
Date:   Tue Dec 22 15:49:28 2020 +0100

    terminal: use GUI session directly
    
    Issue #3196
    Fixes #3970

commit 2c82636a98dcd61479698afc5268a646c793473f
Author: Norman Feske <norman.feske@genode-labs.com>
Date:   Tue Dec 22 16:50:21 2020 +0100

    terminal: respond to font-size changes
    
    Issue #3970


OpenSSL 1.1.1i, curl 7.70.0
===========================

;@chelmuth

commit 7d1f158d6836ed8e52e0feecc46aa455b1ae1841
Author: Christian Helmuth <christian.helmuth@genode-labs.com>
Date:   Wed Mar 18 16:27:28 2020 +0100

    Update OpenSSL to version 1.1.1i
    
    Note, OpenSSL now comes as one combined depot archive *openssl* that
    replaces the former *libssl* and *libcrypto* archives. The libraries are
    still separate binaries for compatibility with legacy software.
    
    Issue #3773

commit 61a530a485241b88a049efadd0de42f82647c918
Author: Christian Helmuth <christian.helmuth@genode-labs.com>
Date:   Thu Feb 18 14:55:31 2021 +0100

    squash "openssl: do not depend on ARM CPU probing" (COMMIT MESSAGE)
    
    openssl: do not depend on ARM CPU probing
    
    With this commit libcrypto does not use ARM NEON extension as long as
    SPECS includes "neon". arm_v7a does declare "neon" per default while
    arm_v8a does.

commit b462b1e658f78a6d93d8896d9dcdf2839812cdbd
Author: Christian Helmuth <christian.helmuth@genode-labs.com>
Date:   Wed Jun 3 13:57:52 2020 +0200

    Update curl to version 7.70.0
    
    Issue #3773


Virtualization
##############

VirtualBox 6.1.14
=================

;@chelmuth

commit b25fc1e58a58c1c7d4a130acec73211a656766a5
Author: Christian Helmuth <christian.helmuth@genode-labs.com>
Date:   Fri Dec 18 14:08:06 2020 +0100

    base: refactor VM/vCPU API
    
    Issue #3554


VirtualBox 5
============

;@cnuke, @alex-ab

commit ae0090ad3e28d764b6cb1b8a2b0c23e3f4d05f96
Author: Alexander Boettcher <alexander.boettcher@genode-labs.com>
Date:   Sat Jan 16 17:20:19 2021 +0100

    vbox5: enable 64bit SVM support
    
    Fixes #3965

commit 8ca71ffd4bbfd1a0d80fe605c8c5924f1faf92ed
Author: Josef Söntgen <josef.soentgen@genode-labs.com>
Date:   Fri Feb 12 12:55:44 2021 +0100

    qemu-usb: use bounce buffer to access DMA memory
    
    The former implemention assumed that the guest physical memory is
    mapped continously. This, however, is not true. Writing larger
    files to an USB stick with a Windows 10 guest would therefore lead
    to data corruption.
    
    The current implementation uses a bounce buffer to copy the data
    to and from the guest physical memory and leaves dealing with the
    memory mappings entirely up to the VMM.
    
    Fixes #4017.

commit 29bb4f88636519cfdf48f799a25b785c17a8a3b8
Author: Josef Söntgen <josef.soentgen@genode-labs.com>
Date:   Mon Jan 18 16:12:53 2021 +0100

    qemu-usb: update port to 5.2.0
    
    The contrib code is updated from 2.4.1 to version 5.2.0 and the used
    device-model is changed to QEMU xHCI. Due to this change older guests
    OSes, namely Windows 7, that relied on the NEC xHCI device-model will
    not work anymore.
    
    The 'Qemu::Controller' interface was extended by an 'info' method, which
    returns the vendor and product ID. This allows for removing the
    hard-coded values in the VirtualBox glue code.
    
    Issue #4018.

commit 1b2d5da6514581d5af8316130862d89ce649564a
Author: Josef Söntgen <josef.soentgen@genode-labs.com>
Date:   Mon Jan 25 14:58:20 2021 +0100

    qemu-usb: adapt ISOCH IN handling for audio
    
    Linux as well as Windows guests want queue to a varying number of
    transfers, where each transfer only covers one transaction (iso frame).
    The best results were obtained by following that behaviour rather
    than queuing multiple iso frames per requests (like is done with OUT
    transfers).
    
    The number of requests queued is increased to 32 while the number of
    packets per reques is decreased to 1.
    
    Issue #4018.

commit 8547387067d79b61567584ebfa23bb916a37a39c
Author: Josef Söntgen <josef.soentgen@genode-labs.com>
Date:   Tue Jan 12 13:28:47 2021 +0100

    qemu-usb: add ring-buffer for ISOCH OUT transfers
    
    Be more in line with the original host implementation in Qemu and
    buffer transfers. Having transfers in-flight helps to smoothen playback
    in case other components utilize the CPU.
    
    Issue #4018.


VirtIO block devices for virtual machines on ARM
================================================

;@skalk

commit 4f03cbaaa609f46b50d70521c474fb4faf73f947
Author: Stefan Kalkowski <stefan.kalkowski@genode-labs.com>
Date:   Thu Feb 18 17:56:56 2021 +0100

    vmm: cleanup virtio model, make it extensible
    
    * Introduce different index types for ring counters and descriptor arrays
      within the Virtio split queue implementation
    * Be more accurate in reporting the queue number supported, and raise it
      to 512
    * Introduce abstractions for mmio register access, where several values
      are stored at the same place, and selector registers exist.
    * Turn Virtio_device into a template to define the Virio queue type,
      and its numbers per device model (needed for e.g., future block model)
    
    Issue #4025

commit 8866336ac86a9238946afdbbddda3103c82544e0
Author: Stefan Kalkowski <stefan.kalkowski@genode-labs.com>
Date:   Fri Feb 19 11:02:58 2021 +0100

    vmm: add virtio block device model
    
    * Add new virtio device model
    * Extend test run-script with vfat block test image
    * Add vmm depot src recipe
    * Use packages in test run-script
    
    Fix #4025


Device drivers
##############

Power-gating of PCI devices on x86
==================================

;@alex-ab

commit b185f3fac196fea00ffda68e99591fa702c0c569
Author: Alexander Boettcher <alexander.boettcher@genode-labs.com>
Date:   Thu Dec 3 15:26:41 2020 +0100

    platform_drv: add support to power PCI devices
    
    - depending on available PCI power cap power off and on
    - save and restore PCI bars if required
    - reset PCI devices after power on if supported
    
    Fixes #3963

commit f358fcbda6fc4df8c879e0461dd303e2d1084115
Author: Alexander Boettcher <alexander.boettcher@genode-labs.com>
Date:   Thu Dec 3 16:12:07 2020 +0100

    nova: flush Intel IOMMU caches
    
    - when memory is detached
    
    Issue #3963

commit 55cef01548bfa91628eed355d80f07b391f02f86
Author: Alexander Boettcher <alexander.boettcher@genode-labs.com>
Date:   Tue Dec 15 13:31:07 2020 +0100

    platform_drv(x86): support dynamic reconfiguration
    
    Fixes #3989

commit a6a923c31bebc2940418a6ea58b35a4ca27c45c0
Author: Norman Feske <norman.feske@genode-labs.com>
Date:   Mon Jan 11 16:53:21 2021 +0100

    driver manager: restart intel_fb when frozen
    
    This patch introduces heartbeat monitoring and automated restarting
    of the intel framebuffer driver.


USB drivers
===========

Additional HID devices
~~~~~~~~~~~~~~~~~~~~~~

;@chelmuth

commit 2a659cb75029f3a3d7cc6a1b2d49281d84c3dc47
Author: Christian Helmuth <christian.helmuth@genode-labs.com>
Date:   Fri Sep 14 16:55:20 2018 +0200

    usb_hid: support for Holtek-based mice fixups
    
    This enables USB mice based on the Holtek chipsets, which need USB
    descriptor fixups. An example mouse is the Sharkoon Drakonia.
    
    Issue #3953

commit 496dc5508f798324ca24a7e8ea4ffdb4bd31fa22
Author: Christian Helmuth <christian.helmuth@genode-labs.com>
Date:   Fri Sep 14 16:58:35 2018 +0200

    usb_hid: support for Apple HID devices
    
    Issue #3953


USB robustness on Raspberry Pi
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

;@cproc

commit ef44c3e99b1b611cfd2604e494630753bf2404e3
Author: Christian Prochaska <christian.prochaska@genode-labs.com>
Date:   Tue Feb 2 01:19:34 2021 +0100

    usb_host_drv: dwc_otg stability improvements
    
    - improve NYET error handling
    - use split interrupt transaction hack
    - clear TT buffers in error situations
    
    Issue #3247


Isochronous transfers
~~~~~~~~~~~~~~~~~~~~~

;@cnuke

commit 9bdba67643f3c9cc34d78491711c0ceb3ba9176e
Author: Josef Söntgen <josef.soentgen@genode-labs.com>
Date:   Thu Jan 28 14:37:59 2021 +0100

    usb_host: properly handle ISOC read requests
    
    * Update the 'packet_size' information with the actual length for
      each isoc frame to be able to handle short reads at the client side.
    
    * Copy the whole transfer buffer because the host controller stores
      the data at the original offsets, i.e., the buffer is not densely
      packed.
    
    Fixes #4018.


Platforms
#########

Pine-A64-LTS single board computer
==================================

;@nfeske

commit a4d56875108de1b2809f0e302fffbfdb6d29f4d5
Author: Pirmin Duss <pirmin.duss@gapfruit.com>
Date:   Tue Sep 8 12:50:49 2020 +0200

    base-hw: allow out of tree imx8 platforms
    
    Issue #3911

; -> genodians.org article series


RISC-V
======

;@ssumpf

commit b1e9c0e7dd5c9d58c17670af7e5351d1ab7dd265
Author: Sebastian Sumpf <sebastian.sumpf@genode-labs.com>
Date:   Wed Feb 10 14:17:25 2021 +0100

    riscv: Fix link errors for Genode nightly
    
    - add .got filter rule for trace policies, otherwise ld raises a
      segmentation fault
    - force soft-float for binary sources (SRC_BIN)
    
    issue #4012

commit 2667b6d7395243956b7ae77e8e260d6a16857c7b
Author: Sebastian Sumpf <sebastian.sumpf@genode-labs.com>
Date:   Wed Feb 10 08:31:39 2021 +0100

    riscv: Use Qemu and update to ISA v1.10
    
    - remove Spike/BBL support in favour of Qemu (>=4.2.1)
    - add 'riscv_qemu' board, remove 'spike' board'
    - update to privileged ISA v1.10 (from v1.9.1)
    - use direct system calls for privileged core threads (they call into
      the kernel and don't use mode changing system calls, i.e. 'ecall',
      semantics)
    - use 'OpenSBI' semtantics for SBI calls (to machine mode) instead of
      BBL
    
    issue #4012


Removal of Muen separation kernel support
=========================================

;@nfeske

commit bf23c3d6e5547b0e8d7c26c1a1ce3b2289ad1f5b
Author: Norman Feske <norman.feske@genode-labs.com>
Date:   Fri Jan 29 13:48:00 2021 +0100

    Remove support for the Muen separation kernel
    
    Fixes #3995
    Fixes #3994


Build system and tools
######################

Streamlined distinction of boards by build and run tools
========================================================

;@nfeske

commit 5a123e37c9dde0edb66575ffa55e7b0f95dcb6b8
Author: Stefan Kalkowski <stefan.kalkowski@genode-labs.com>
Date:   Thu Jan 7 19:15:55 2021 +0100

    run: introduce have_board helper function
    
    The new helper function returns a boolean value analoque to 'have_spec' if the
    BOARD variable corresponds to the given value. It shall replace [have_spec <board>]
    declarations in run-scripts.
    
    Ref #3971

commit bdd923406f11f1f4b97adb152e6cdb54c1019070
Author: Stefan Kalkowski <stefan.kalkowski@genode-labs.com>
ttDate:   Wed Jan 13 10:15:10 2021 +0100

    base: remove SPEC variables of boards (fix #3971)
    
    * Remove SPEC declarations from mk/spec
    * Remove all board-specific REQUIRE declaratiions left
    * Replace [have_spec <board>] run-script declarations with have_board where necessary
    * Remove addition of BOARD variable to SPECS in toplevel Makefile
    * Move board-specific directories in base-hw out of specs

commit 1ccf8a280c41b9eefcdf2a265bba53571241d48e
Author: Norman Feske <norman.feske@genode-labs.com>
Date:   Mon Jan 18 17:55:51 2021 +0100

    base-hw: simplify board support in external repo
    
    Avoid use of REP_DIR in *.mk files to simplify the use of these files as
    templates for a board hosted in a separate repository.
    
    Use REP_INC_DIR for searching headers, thereby considering headers
    hosted in an external repository.
    
    Issue #3168

commit 9bfd812a887e2acac07bff573e91d5bda6143617
Author: Norman Feske <norman.feske@genode-labs.com>
Date:   Tue Jan 19 14:17:26 2021 +0100

    tool/run: search repos for run-tool plugins
    
    This patch allows for supplementing the existing run-tool plugins with
    additional plugins hosted inside a repository. E.g., it enables the run
    tool to find world/tool/run/boot_dir/hw automatically.
    
    Fixes #3993

commit c4cf9b6e6d6ef8a0a270859f4d6d4207d450a454
Author: Norman Feske <norman.feske@genode-labs.com>
Date:   Thu Jan 21 14:32:47 2021 +0100

    base-hw: introduce board-property directories
    
    This patch moves the bootstrap-link-address information from the
    tool/run/boot_dir/hw file to board-specific property files that can be
    accessed by using the board as key. This eliminates the need to
    customize boot_dir/hw when hosting board-support in an external
    repository.
    
    Fixes #3998

commit db7c042e440b3affa65f0a7dd12d72282bbb4edb
Author: Norman Feske <norman.feske@genode-labs.com>
Date:   Mon Feb 15 18:17:26 2021 +0100

    base-hw: streamline extraction of depot archives
    
    This patch simplifies the packaging of the base-hw kernel for a given
    board, in particular when the board support is hosted as an external
    repository such as genode-world. Regardless of where the board-support
    is hosted, the content.mk file becomes as simple as:
    
      include $(GENODE_DIR)/repos/base-hw/recipes/src/base-hw_content.inc
    
    The board name is automatically inferred from the path of the src
    recipe. The architecture is determined from board/<name>/arch files,
    following the pattern of the image_link_address. The attempt to build a
    base-hw-<board> binary archive for the wrong architecture is now
    gracefully handled by skipping all targets (using the REQUIRES
    mechanism).
    
    Besides the improved convenience, the patch results in depot archives
    that are much closer tailored to the actual board by omitting files for
    architectures that are not used by the board. E.g., the src/base-hw-pc
    archive does not contain any ARM-related content.
    
    The patch also restores the package builds for core/bootstrap object
    files as a follow-up fix of "base: remove SPEC variables of boards",
    which happened to left 'BOARD' undefined in the src archives.
    
    Fixes #4019


Compiler cache
==============

;@nfeske

commit 05350b898346794e664c424a335154907d8d466d
Author: Norman Feske <norman.feske@genode-labs.com>
Date:   Fri Jan 29 16:11:12 2021 +0100

    Add ccache support to build system
    
    This patch simplifies the use of ccache with the build system. Up until
    now, each developer had to set up the ccache hooks manually, adjust the
    PATH variable, and customize the etc/tools.conf in each build directory.
    With the patch, ccache can be enabled by un-commenting a single line in
    the etc/build.conf file.
    
    Fixes #4004
